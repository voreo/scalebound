var oneStoreCreateGuid=function(){function n(){return Math.floor(Math.random()*16).toString(16)}var t="xxxxxxxx-xxxx-4xxx-Rxxx-xxxxxxxxxxxx".replace(/x/g,n);return t.replace("R",(8|Math.floor(Math.random()*3)).toString(16))},oneStoreUserAgent=function(){var n=window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase&&window.navigator.userAgent.toLowerCase()||null;return{isFromThresholdDevice:function(){return n&&(n.indexOf("windows nt 6.4")>=0||n.indexOf("windows nt 10")>=0)&&n.indexOf("xbox")<0&&n.indexOf("arm")<0},isFromWinPhone10Device:function(){return n&&(n.indexOf("windows phone 10")>=0||n.indexOf("windows nt 10")>=0&&n.indexOf("arm")>=0)},isFromWin8XDevice:function(){return n&&(n.indexOf("windows nt 6.3")>=0||n.indexOf("windows nt 6.2")>=0||n.indexOf("windows nt 8")>=0)&&n.indexOf("xbox")<0&&n.indexOf("wpdesktop")<0},isFromWinPhone81Device:function(){return n&&(n.indexOf("windows phone 8.1")>=0||n.indexOf("trident/7.0")>=0&&n.indexOf("wpdesktop")>=0)},isFromWinPhone8Device:function(){return n&&(n.indexOf("windows phone 8.0")>=0||n.indexOf("trident/6.0")>=0&&n.indexOf("wpdesktop")>=0)},isFromWinPhone7XDevice:function(){return n&&(n.indexOf("windows phone os 7")>=0||n.indexOf("windows nt 6.1")>=0&&n.indexOf("wp7")>=0)},isFromWindowsDevice:function(){return n&&(n.indexOf("windows")>=0||n.indexOf("wpdesktop")>=0)},isFromXboxOneDevice:function(){return n&&n.indexOf("xbox one")>=0},isFromXboxDevice:function(){return n&&n.indexOf("xbox")>=0},getMsIeVersion:function(){var t=n&&n.indexOf("msie"),r=t>=0;if(r){var u=n.indexOf(";",t),f=n.substring(t,u),i=f.split(" ");if(i&&i.length>1)return i[1]*1}return-1},isIeVersionOrLower:function(n){var t=this.getMsIeVersion();return t>-1&&t<=n}}},oneStoreRedirect=function(n,t){function i(){return n.isFromThresholdDevice()||n.isFromWinPhone10Device()||n.isFromWin8XDevice()||n.isFromWinPhone81Device()||n.isFromWinPhone8Device()||n.isFromWinPhone7XDevice()||n.isFromXboxOneDevice()}function r(n){return!n||n.indexOf("www.microsoft.com")<0&&n.indexOf("microsoftstore.com")<0}function u(n){return(n||r(t.referrer))&&i()}var f=function(i,r,f,e,o,s,h,c,l,a){var v,y,p;a||(v=String.empty,s&&n.isFromThresholdDevice()?v=r.threshold:h&&n.isFromWinPhone10Device()?v=r.threshold:s&&c&&n.isFromWin8XDevice()?v=r.win8x:h&&l&&n.isFromWinPhone81Device()?v=r.phone81:h&&l&&n.isFromWinPhone8Device()?v=r.phone807x:h&&l&&n.isFromWinPhone7XDevice()&&(v=r.phone807x),u(e)&&f&&v&&(window._IG=oneStoreCreateGuid(),y=t.referrer,y||(y="unistoreweb"),v=v+"&webig="+encodeURIComponent(window._IG)+"&referrer="+encodeURIComponent(y),p=t.createElement("meta"),p.name="ms.opennativepdp",p.content=v,t.head&&t.head.appendChild(p),t.getElementById(i).src=v))};return{autoRedirectToNativeStorePdp:f,shouldRedirectToNativeStore:u,isFromRedirectableDevice:i,referrerIsNotMsCom:r}}