/* 15:46:42 05/01/2017 [http://oystatic.ignimgs.com/src/core/js/viewability.js, http://oystatic.ignimgs.com/src/core/js/widgets/global/page/swfobject.js, http://oystatic.ignimgs.com/src/core/js/dfp-ima-html5.js, http://oystatic.ignimgs.com/src/core/js/video-analytics-html5.js, http://oystatic.ignimgs.com/src/core/js/widgets/video/embed/content_v4.js]*/
(function(e,i,d){var l={article:[{slot:"",slotName:"queen",slotSelector:"#sugarad-300x250, .queen",slotType:"Medrec",containerSelector:"#queen",containerClass:"chess article",topThreshold:0,placements:"#article-content > .aligncenter, #article-content > .img-div, #article-content > .twitter-container",refreshAfterVisible:!1,lockX:!0,lockY:!1,self:"article"}],wiki:[{slot:"",slotName:"queen",slotSelector:".queen",slotType:"Medrec",containerSelector:"#queen",containerClass:"chess portal",placements:".alpha.omega > *, #wiki-content-proper > .block-wrapper",
refreshAfterVisible:!1,topThreshold:0,getTopThreshold:function(){return d(".gh-rightRail").length?d(".gh-rightRail").offset().top+d(".gh-rightRail").height():0},lockX:!0,lockY:!1,self:"wiki"}],list:[{slot:"",slotName:"queen",slotSelector:".queen",slotType:"Medrec",containerSelector:"#queen",containerClass:"chess portal list",placements:".ad-container.ad-list > .ad-placement",refreshAfterVisible:!0,topThreshold:0,lockX:!0,lockY:!1,self:"list"}]},c=[],h={},n,o=function(a){d(e).off("IGNScroll.down-"+
a.slot).on("IGNScroll.down-"+a.slot,{threshold:function(){return a.$currentContainer.offset().top+a.$ad.height()+200}},function(){j(a)}).off("IGNScroll.up-"+a.slot).on("IGNScroll.up-"+a.slot,{threshold:function(){return a.$currentContainer.offset().top-d(e).height()},reverse:!0},function(){j(a,!0)})},p=function(a){var c=a.$ad,b=a.$currentContainer,f;c.css({"-moz-transform":"none","-ms-transform":"none","-webkit-transform":"none",transform:"none"});a.portaled&&(f=a.lockY?0:b.offset().top-c.offset().top,
b=a.lockX?0:b.offset().left-c.offset().left,c.css({"-moz-transform":"translate("+b+"px,"+f+"px)","-ms-transform":"translate("+b+"px,"+f+"px)","-webkit-transform":"translate("+b+"px,"+f+"px)",transform:"translate("+b+"px,"+f+"px)"}),o(a))},j=function(a,c){var b,f;if(a.enabled){if(a.refreshAfterVisible&&a.viewed)a.viewed=!1,ChessKit.request.refresh([ChessKit.request.slots.allUnits[a.slotName].slot.setTargeting("rfr","true")]);if(c)d(a.containerSelector).each(function(){var a=d(this);if(0<a[0].getBoundingClientRect().bottom)return!1;
f=a.children()});else{a.$placements.each(function(){var f=d(this),c=d(e).height();if(0<f[0].getBoundingClientRect().top-c&&f.offset().top>a.topThreshold)return b=f,!1});if(!b)return;if(b.prev().children().first().hasClass(a.slotName))f=b.prev().children();else{var m=d('<div id="'+a.slotName+'" class="'+a.containerClass+'"></div>');f=d('<div class="'+a.slotName+' has-ad"></div>');f.css({height:a.$ad.height()});m.append(f);b.before(m)}}if(!a.firstMove)e.igndrones.async.push(function(){e.igndrones.fireEvent("Display ads",
a.slotType+" Portalled",e.location.href,d(e).height())}),e.IGN_UA.trackEvent("ads-portal"),a.firstMove=!0;d(a.containerSelector).removeClass("has-ad");if(!f)f=a.$originalContainer;f.addClass("has-ad");a.$currentContainer=f;a.portaled=a.$currentContainer[0]!==a.$originalContainer[0];p(a)}};e.IGN.viewability=function(){var a={};e.ZDVOptions={onViewable:function(a){b(a,"viewed")},onLoaded:function(a){b(a,"loaded")}};var c=function(f){a[f]||(a[f]={ad:null,loaded:!1,loadListeners:[],viewed:!1,viewListeners:[]});
return a[f]},b=function(a,b){var e=c(a.containerId);e.ad=a;if("loaded"===b){e.loaded=!0;for(var d=0;d<e.loadListeners.length;d++)e.loadListeners[d].call(null,a)}else if("viewed"===b){e.viewed=!0;for(d=0;d<e.viewListeners.length;d++)e.viewListeners[d].call(null,a)}};return{debug:!1,onViewed:function(a,b){a=c(a);a.viewed?b.call(null,a.ad):a.viewListeners.push(b)},onLoaded:function(a,b){a=c(a);a.loaded?b.call(null,a.ad):a.loadListeners.push(b)}}}();i.addEventListener("chessSlotsReady",function(){var a=
"ChessKit"in e.top&&e.top.ChessKit.data?e.top.ChessKit.data:null,k;a&&"string"===typeof a.pagetype&&l.hasOwnProperty(a.pagetype)&&(c=l[a.pagetype]);for(var b=0;b<c.length;b++){d(c[b].containerSelector).addClass("has-ad");k=c[b].containerSelector.split(", ").join(".has-ad, ")+".has-ad";if("list"===c[b].self&&"list-desktop-02"===a.template)c[b].lockX=!1;c[b]=d.extend(c[b],{enabled:!0,firstMove:!1,visibleTime:0,visibleTarget:10,viewed:!1,portaled:!1,$ad:d(c[b].slotSelector),$originalContainer:d(k),$currentContainer:d(k),
$placements:d(c[b].placements)});if(0!==c[b].$ad.length){c[b].slot=c[b].$ad[0].id;if("function"===typeof c[b].getTopThreshold)c[b].topThreshold=c[b].getTopThreshold.call(c);0!==c[b].$placements.length&&(h[c[b].slot]=c[b],e.IGN.viewability.onLoaded(c[b].slot,function(a){o(h[a.containerId]);e.pageYOffset>h[a.containerId].$currentContainer.offset().top+h[a.containerId].$ad.height()+200&&j(h[a.containerId]);e.IGN.viewability.onViewed(a.containerId,function(a){a=h[a.containerId];a.visibleTarget=2;if(a.refreshAfterVisible)a.viewed=
!0}.bind(c))}))}}(function m(){for(var a=!1,b=0;b<c.length;b++)if(c[b].enabled){var a=!0,d=c[b],g;g=c[b].$ad[0];if("undefined"!==typeof g)if("function"===typeof jQuery&&g instanceof jQuery&&(g=g[0]),g=g.getBoundingClientRect(),g.left<=(e.innerWidth||i.documentElement.clientWidth)&&0<=g.right&&g.top<=(e.innerHeight||i.documentElement.clientHeight)&&0<=g.bottom){var h=Math.max(g.left,0),j=Math.min(g.right,e.innerWidth||i.documentElement.clientWidth),k=Math.min(g.bottom,e.innerHeight||i.documentElement.clientHeight),
l=Math.max(g.top,0);g=(j-h)*(k-l)/((g.right-g.left)*(g.bottom-g.top))}else g=0;else g=void 0;d.visibleTime=0.5<=g?c[b].visibleTime+0.25:0}c.length&&a&&setTimeout(m,250)})();d(e).resize(function(){clearTimeout(n);n=setTimeout(function(){if(c.length)for(var a=0;a<c.length;a++)p(c[a])},250)})})})(window,document,IGN.jQuery);
var swfobject=function(){function u(){if(!s){try{var a=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}s=!0;for(var a=x.length,c=0;c<a;c++)x[c]()}}function L(a){s?a():x[x.length]=a}function M(a){if(typeof m.addEventListener!=i)m.addEventListener("load",a,!1);else if(typeof d.addEventListener!=i)d.addEventListener("load",a,!1);else if(typeof m.attachEvent!=i)U(m,"onload",a);else if("function"==typeof m.onload){var b=m.onload;m.onload=
function(){b();a()}}else m.onload=a}function V(){var a=d.getElementsByTagName("body")[0],b=d.createElement(r);b.setAttribute("type",y);var c=a.appendChild(b);if(c){var f=0;(function(){if(typeof c.GetVariable!=i){var g=c.GetVariable("$version");if(g)g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}else if(10>f){f++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;D()})()}else D()}function D(){var a=p.length;if(0<a)for(var b=0;b<a;b++){var c=p[b].id,
f=p[b].callbackFn,g={success:!1,id:c};if(0<e.pv[0]){var d=n(c);if(d)if(z(p[b].swfVersion)&&!(e.wk&&312>e.wk)){if(t(c,!0),f)g.success=!0,g.ref=E(c),f(g)}else if(p[b].expressInstall&&F()){g={};g.data=p[b].expressInstall;g.width=d.getAttribute("width")||"0";g.height=d.getAttribute("height")||"0";if(d.getAttribute("class"))g.styleclass=d.getAttribute("class");if(d.getAttribute("align"))g.align=d.getAttribute("align");for(var h={},d=d.getElementsByTagName("param"),j=d.length,k=0;k<j;k++)"movie"!=d[k].getAttribute("name").toLowerCase()&&
(h[d[k].getAttribute("name")]=d[k].getAttribute("value"));G(g,h,c,f)}else W(d),f&&f(g)}else if(t(c,!0),f){if((c=E(c))&&typeof c.SetVariable!=i)g.success=!0,g.ref=c;f(g)}}}function E(a){var b=null;if((a=n(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=i?b=a:(a=a.getElementsByTagName(r)[0])&&(b=a);return b}function F(){return!A&&z("6.0.65")&&(e.win||e.mac)&&!(e.wk&&312>e.wk)}function G(a,b,c,f){A=!0;H=f||null;N={success:!1,id:c};var g=n(c);if(g){"OBJECT"==g.nodeName?(w=I(g),B=null):(w=g,B=c);a.id=
O;if(typeof a.width==i||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==i||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";d.title=d.title.slice(0,47)+" - Flash Player Installation";f=e.ie&&e.win?"ActiveX":"PlugIn";f="MMredirectURL="+m.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+d.title;b.flashvars=typeof b.flashvars!=i?b.flashvars+("&"+f):f;if(e.ie&&e.win&&4!=g.readyState)f=d.createElement("div"),c+="SWFObjectNew",f.setAttribute("id",
c),g.parentNode.insertBefore(f,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}();J(a,b,c)}}function W(a){if(e.ie&&e.win&&4!=a.readyState){var b=d.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(I(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(I(a),a)}function I(a){var b=d.createElement("div");if(e.win&&
e.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(r)[0])if(a=a.childNodes)for(var c=a.length,f=0;f<c;f++)!(1==a[f].nodeType&&"PARAM"==a[f].nodeName)&&8!=a[f].nodeType&&b.appendChild(a[f].cloneNode(!0));return b}function J(a,b,c){var f,g=n(c);if(e.wk&&312>e.wk)return f;if(g){if(typeof a.id==i)a.id=c;if(e.ie&&e.win){var o="",h;for(h in a)if(a[h]!=Object.prototype[h])"data"==h.toLowerCase()?b.movie=a[h]:"styleclass"==h.toLowerCase()?o+=' class="'+a[h]+'"':"classid"!=h.toLowerCase()&&(o+=
" "+h+'="'+a[h]+'"');h="";for(var j in b)b[j]!=Object.prototype[j]&&(h+='<param name="'+j+'" value="'+b[j]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+h+"</object>";C[C.length]=a.id;f=n(a.id)}else{j=d.createElement(r);j.setAttribute("type",y);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(o in b)b[o]!=Object.prototype[o]&&"movie"!=o.toLowerCase()&&
(a=j,h=o,k=b[o],c=d.createElement("param"),c.setAttribute("name",h),c.setAttribute("value",k),a.appendChild(c));g.parentNode.replaceChild(j,g);f=j}}return f}function P(a){var b=n(a);if(b&&"OBJECT"==b.nodeName)e.ie&&e.win?(b.style.display="none",function(){if(4==b.readyState){var c=n(a);if(c){for(var f in c)"function"==typeof c[f]&&(c[f]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function n(a){var b=null;try{b=d.getElementById(a)}catch(c){}return b}
function U(a,b,c){a.attachEvent(b,c);v[v.length]=[a,b,c]}function z(a){var b=e.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function Q(a,b,c,f){if(!e.ie||!e.mac){var g=d.getElementsByTagName("head")[0];if(g){c=c&&"string"==typeof c?c:"screen";f&&(K=l=null);if(!l||K!=c)f=d.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("media",c),l=g.appendChild(f),
e.ie&&e.win&&typeof d.styleSheets!=i&&0<d.styleSheets.length&&(l=d.styleSheets[d.styleSheets.length-1]),K=c;e.ie&&e.win?l&&typeof l.addRule==r&&l.addRule(a,b):l&&typeof d.createTextNode!=i&&l.appendChild(d.createTextNode(a+" {"+b+"}"))}}}function t(a,b){if(R){var c=b?"visible":"hidden";s&&n(a)?n(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function S(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=i?encodeURIComponent(a):a}var i="undefined",r="object",y="application/x-shockwave-flash",
O="SWFObjectExprInst",m=window,d=document,q=navigator,T=!1,x=[function(){T?V():D()}],p=[],C=[],v=[],w,B,H,N,s=!1,A=!1,l,K,R=!0,e=function(){var a=typeof d.getElementById!=i&&typeof d.getElementsByTagName!=i&&typeof d.createElement!=i,b=q.userAgent.toLowerCase(),c=q.platform.toLowerCase(),f=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\u000b1",e=[0,0,0],h=null;if(typeof q.plugins!=i&&typeof q.plugins["Shockwave Flash"]==
r){if((h=q.plugins["Shockwave Flash"].description)&&!(typeof q.mimeTypes!=i&&q.mimeTypes[y]&&!q.mimeTypes[y].enabledPlugin))T=!0,g=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),e[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof m.ActiveXObject!=i)try{var j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(j&&(h=j.GetVariable("$version")))g=!0,h=h.split(" ")[1].split(","),
e=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}catch(k){}return{w3:a,pv:e,wk:b,ie:g,win:f,mac:c}}();(function(){e.w3&&((typeof d.readyState!=i&&"complete"==d.readyState||typeof d.readyState==i&&(d.getElementsByTagName("body")[0]||d.body))&&u(),s||(typeof d.addEventListener!=i&&d.addEventListener("DOMContentLoaded",u,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){"complete"==d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),u())}),m==top&&function(){if(!s){try{d.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}u()}}()),e.wk&&function(){s||(/loaded|complete/.test(d.readyState)?u():setTimeout(arguments.callee,0))}(),M(u)))})();(function(){e.ie&&e.win&&window.attachEvent("onunload",function(){for(var a=v.length,b=0;b<a;b++)v[b][0].detachEvent(v[b][1],v[b][2]);a=C.length;for(b=0;b<a;b++)P(C[b]);for(var c in e)e[c]=null;e=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})})();return{registerObject:function(a,b,c,f){if(e.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=
f;p[p.length]=d;t(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(e.w3)return E(a)},embedSWF:function(a,b,c,d,g,o,h,j,k,m){var n={success:!1,id:b};e.w3&&!(e.wk&&312>e.wk)&&a&&b&&c&&d&&g?(t(b,!1),L(function(){c+="";d+="";var e={};if(k&&typeof k===r)for(var l in k)e[l]=k[l];e.data=a;e.width=c;e.height=d;l={};if(j&&typeof j===r)for(var p in j)l[p]=j[p];if(h&&typeof h===r)for(var q in h)l.flashvars=typeof l.flashvars!=i?l.flashvars+("&"+q+"="+h[q]):q+"="+h[q];if(z(g))p=J(e,l,b),e.id==
b&&t(b,!0),n.success=!0,n.ref=p;else{if(o&&F()){e.data=o;G(e,l,b,m);return}t(b,!0)}m&&m(n)})):m&&m(n)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:z,createSWF:function(a,b,c){if(e.w3)return J(a,b,c)},showExpressInstall:function(a,b,c,d){e.w3&&F()&&G(a,b,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,b,c,d){e.w3&&Q(a,b,c,d)},addDomLoadEvent:L,addLoadEvent:M,getQueryParamValue:function(a){var b=
d.location.search||d.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return S(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return S(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(A){var a=n(O);if(a&&w){a.parentNode.replaceChild(w,a);if(B&&(t(B,!0),e.ie&&e.win))w.style.display="block";H&&H(N)}A=!1}}}}();
(function(){$(document).ready(function(){window.vContexts=[];window.activeClickURLVideoId=null;window.instanceId=0;window.imaHTML5=window.imaHTML5||{};var m=window.imaHTML5.async||[],k=navigator.userAgent.toLowerCase();window.isAndroid=-1!=k.search(/android \d\.\d/)?!0:!1;window.isChrome=-1!=k.search(/chrome \d\.\d/)?!0:!1;window.html5_companion_test=!1;window.activateHtml5PlayerLogs=!1;playButtonId="playBtn_";videoPlayerId="videoPlayer_";videoAdId="videoAd_";videoContainer="videoDiv_";clickTrackerId=
"clickTracker_";var l;window.imaHTML5={registerVideo:function(a,b,c,h,g,d,i,f){for(var e=1;e<=window.instanceId;e++)if(window.vContexts[e].videoId===a)return;c="undefined"==typeof c?"false":c;window.isAndroid||$("#"+videoPlayerId+a).hide();window.instanceId++;window.vContexts[window.instanceId]={};window.vContexts[window.instanceId].videoId=a;window.vContexts[window.instanceId].videoSrc=b;window.vContexts[window.instanceId].autoplay=c;window.vContexts[window.instanceId].videoDim=h;window.vContexts[window.instanceId].isMobileUa=
d;window.vContexts[window.instanceId].pagetype=g;window.vContexts[window.instanceId].videoNetwork=i;window.vContexts[window.instanceId].renderClickTracker=f;window.vContexts[window.instanceId].ctx=new this.VideoContext(window.instanceId)},VideoContext:function(a){this.playButton=$("#"+playButtonId+vContexts[a].videoId);this.posterImg=$("#"+videoContainer+vContexts[a].videoId+" .html5PosterImg");this.video=$("#"+videoPlayerId+vContexts[a].videoId);this.clickTracker=$("#"+clickTrackerId+vContexts[a].videoId);
this.adContainer=$("#"+videoAdId+vContexts[a].videoId);this.trackerActive=!1;0<this.playButton.length&&this.playButton[0].addEventListener("click",window.imaHTML5.bind(this,this.onClick),!1);this.adsDone=this.adsActive=this.playing=!1;this.ctxId=a;this.metadataLoaded=!1;this.playerController=new window.imaHTML5.PlayerController(a);this.adsController=new window.imaHTML5.AdsController(this,this.playerController);this.adTagUrl=window.imaHTML5._generateAdTag(a);this.contentEndedCallback=window.imaHTML5.bind(this,
this.onContentEnded);this.playerController.registerVideoEndedCallback(this.contentEndedCallback)},PlayerController:function(a){var b=window.vContexts[a].videoId;this.contentPlayer=document.getElementById(videoPlayerId+b);this.adContainer=document.getElementById(videoAdId+b);this.width=window.vContexts[a].videoDim.width;this.height=window.vContexts[a].videoDim.height;this.ctxId=a;this.adPlaying=!1},AdsController:function(a,b){this.videoContext=a;this.player=b;this.adsManager=null;this.ctxId=b.ctxId;
this.contentCompleteCalled=!1;this.clickTracker=document.getElementById("clickTracker_"+vContexts[this.ctxId].videoId);this.time={request:null,response:null};if(null!==this.player.adContainer)this.adDisplayContainer=window.vContexts[this.ctxId].renderClickTracker?new google.ima.AdDisplayContainer(this.player.adContainer,this.player.contentPlayer,this.clickTracker):new google.ima.AdDisplayContainer(this.player.adContainer,this.player.contentPlayer),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),
this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1,this),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this)},InitPlayer:function(a){if("undefined"!==typeof a.id)elementId=a.id,$video=$(a).prevAll("video:first"),window.isAndroid||$video.show(),$video.click(function(){this.play()}),elementId=a.id,$(a).prevAll("img:first").andSelf().remove(),elementId=elementId.split("_")},bind:function(a,b){return function(){b.apply(a,
arguments)}},_generateAdTag:function(a){this._getVideoLocation(a);var b=this._getAdData(a);vContexts[a].adData=b;var c="ciu_szs="+b.companionAds,a="http://pubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&impl=s&output=xml_vast2&unviewed_position_start=1&sz=640x360&iu="+b.adUnits+"&url=[referrer_url]&correlator=[timestamp]&"+("cust_params="+b.customData)+"&"+("cmsid="+b.cmsid)+"&"+("scor="+a)+"&vad_type=linear&min_ad_duration=10000&max_ad_duration=40000&"+("vid="+vContexts[a].videoId);""!=b.companionAds&&
"undefined"!=typeof b.companionAds&&(a+="&"+c);this.log("Ad Tag URL = "+a);return a},_getVideoLocation:function(a){var b,c;window.vContexts[a].embedLocation={};window.vContexts[a].embedLocation.url="";if(window.top!=window.self){if(""!=document.referrer)window.vContexts[a].embedLocation.url=b=document.referrer}else if(""!=window.location.href)window.vContexts[a].embedLocation.url=b=window.location.href;window.vContexts[a].embedLocation.urlParts=b=b.match(/(https?):\/\/([^/]+)([^#]*)/i);window.vContexts[a].embedLocation.urlScheme=
""+b[1];window.vContexts[a].embedLocation.urlHostname=c=""+b[2];window.vContexts[a].embedLocation.urlUri=""+b[3].split("?")[0];-1!=c.search(/ign\.com$/i)?(window.vContexts[a].videoHost="ign",window.vContexts[a].videoEnv=-1!=c.search(/m\.(ca.|au.|uk.|ie.|)ign\.com$/i)?"mobile":"desktop"):window.vContexts[a].videoHost=-1!=c.search(/askmen\.com$/i)?"askmen":-1!=c.search(/pcmag\.com$/i)?"pcmag":-1!=c.search(/wikia\.com$/i)?"wikia":"external";a=b[3].split("?")[1];if("undefined"!=typeof a&&""!=a){a=a.split("&");
for(b=0;b<a.length;b++)if(c=a[b].split("="),1<c.length&&"ignplayerdebug"==c[0]&&"true"==c[1])window.activateHtml5PlayerLogs=!0}},_getAdData:function(a){var b=window.vContexts[a],c=b.pagetype,a={};a.adUnits="";a.companionAds="";a.customData="";var h="",g="",d="",i="";switch(b.videoHost){case "ign":this.log("Site : IGN");i="973";h="5691";g="IGN_Video";if(window.top!==window.self)if(this.log("Embed Type: iFrame"),"desktop"==b.videoEnv){if(this.log("Version : Desktop"),"undefined"!=typeof c&&"unmatched"==
c&&"undefined"!=typeof IGN&&"undefined"!=typeof IGN.pagetype)switch(IGN.pagetype){case "channel":d="Channels";break;case "wiki":d="Wikis";f="wiki-desktop-01";break;case "article":d="Articles";a.companionAds="300x250";break;case "external":d="External_Embeds";break;default:d=""}}else{if("mobile"===b.videoEnv&&(this.log("Version : Mobile"),"undefined"!==typeof c&&"unmatched"===c&&"undefined"!==typeof IGN&&"undefined"!==typeof IGN.pagetype))switch(IGN.pagetype){case "external":d="External_Embeds";break;
case "article":c=b.embedLocation.urlUri;c=c.split("/");"articles"===c[1]&&(d="Articles");break;case "wiki":d="Wikis";f="wiki-mobile-01";break;default:d=""}}else if(window.top===window.self){this.log("Embed Type : In page");var f="";if("desktop"===b.videoEnv){if(this.log("Version : Desktop"),"undefined"!==typeof c&&"undefined"!==typeof IGN&&"undefined"!==typeof IGN.pagetype)switch(IGN.pagetype){case "article":d="Articles";a.companionAds="300x250";if(window.ChessKit&&ChessKit.data&&ChessKit.data.watchread_type)a.customData=
this._addCustomParameter("watchread_type",ChessKit.data.watchread_type,a.customData);break;case "mediavideoplayer":d="Mediavideoplayer";a.companionAds="300x250,6x6";break;case "wiki":d="Wikis";f="wiki-desktop-01";break;case "list":d="Lists";f="list-desktop-01";break;case "vdo":d="Vdo";f="vdo-desktop-01";break;default:d=""}}else if("mobile"===b.videoEnv&&(this.log("Version : Mobile"),"undefined"!==typeof c)){if("undefined"!==typeof IGN&&"undefined"!==typeof IGN.pagetype)switch(c=b.embedLocation.urlUri,
c=c.split("/"),IGN.pagetype){case "article":"articles"===c[1]&&(d="Articles");break;case "mediavideoplayer":d="Mediavideoplayer";f=2<c.length?"mediavideoplayer-mobile-01":"m_index-mobile-03";break;case "wiki":d="Wikis";f="wiki-mobile-01";break;case "list":d="Lists";f="list-desktop-01";break;case "external":d="External_Embeds";break;default:d=""}if(""===d)c=b.embedLocation.urlUri,c=c.split("/"),"articles"===c[1]?d="Articles":"wikis"===c[1]?(d="Wikis",f="wiki-mobile-01"):"videos"===c[1]?(d="Mediavideoplayer",
f=2<c.length?"mediavideoplayer-mobile-01":"m_index-mobile-03"):"trailers"===c[1]?(d="Section",f="section-mobile-01"):d=""}}if(!f&&window.ChessKit&&ChessKit.data&&ChessKit.data.template)f=ChessKit.data.template;if(f)a.customData=this._addCustomParameter("template",f,a.customData);break;case "askmen":this.log("Site : AskMen");g="AskMenVideo";hostName=b.embedLocation.urlHostname;""!=hostName&&"undefined"!==typeof hostName&&(-1!=hostName.search(/(www|ca)\.askmen\.com$/i)?(h="9884623",i="543",this.log("Hitting US ZD DFP Instance")):
(h="5691",i="1093",this.log("Hitting IGN DFP Instance")));c=b.embedLocation.urlUri.split("/");if(2<c.length)if("video"===c[1]){this.log("Video Channel : "+c[2]);switch(c[2]){case "entertainment-and-celebrities":d="celebs_video";break;case "sex-and-dating":case "dating-sex":d="datingsex_video";break;case "fashion":d="fashion_video";break;case "sports-and-fitness":case "health-sports":d="sports_video";break;case "career-and-money":d="powermoney_video";break;case "grooming":d="grooming_video";break;
case "cars":d="cars_video";break;case "mens-lifestyle":d="fineliving_video";break;default:d="unknown_video"}a.customData=this._addCustomParameter("am_pagetype","video",a.customData);this.log("Pagetype : Video")}else{this.log("Article Channel : "+c[1]);switch(c[1]){case "entertainment":case "celebs":d="celebs_video";break;case "dating":d="datingsex_video";break;case "fashion":d="fashion_video";break;case "sports":d="sports_video";break;case "money":d="powermoney_video";break;case "grooming":d="grooming_video";
break;case "cars":d="cars_video";break;case "fine_living":d="fineliving_video";break;case "top_10":d="top10_video";break;default:d="unknown_video"}a.customData=this._addCustomParameter("am_pagetype","article",a.customData);this.log("Pagetype : Article")}break;case "pcmag":this.log("Site : PCMag");i="1292";h="4585";g="PCMAG_Video";f=window.location.search.substring(1);c=f.split("&");for(f=0;f<c.length;f++){var e=c[f].split("=");if("adTargeting"===e[0]){e=decodeURIComponent(e[1]);e=JSON.parse(e);"undefined"!==
typeof e.AdUnitPath&&(adTargetingParts=e.AdUnitPath.split("/"),h=adTargetingParts[0],g=adTargetingParts[1],d=adTargetingParts[2]);if("undefined"!==typeof e.ZdId){var j=e.ZdId.join(",");a.customData=this._addCustomParameter("zdid",j,a.customData)}if("undefined"!==typeof e.ZdAudience)j=e.ZdAudience.join(","),a.customData=this._addCustomParameter("zdaudience",j,a.customData);if("undefined"!==typeof e.ZdCompany)j=e.ZdCompany.join(","),a.customData=this._addCustomParameter("zdcompany",j,a.customData);
if("undefined"!==typeof e.Topic)j=e.Topic.join(","),a.customData=this._addCustomParameter("zdtopic",j,a.customData);if("undefined"!==typeof e.ref)j=e.ref.join(","),a.customData=this._addCustomParameter("r",j,a.customData);if("undefined"!==typeof e.zdbb)e=e.zdbb.join(","),a.customData=this._addCustomParameter("zdbb",e,a.customData)}}break;case "wikia":this.log("Site : Wikia");i="973";h="5691";g="IGN_Wikia";wikiaAdUnit2={gameshub:"Games",movieshub:"Entertainment",lifestylehub:"Lifestyle"};"undefined"!=
typeof b.embedLocation.urlHostname&&(d=b.embedLocation.urlHostname.split("."),d="undefined"!=typeof d[0]&&"undefined"!=typeof wikiaAdUnit2[d[0]]?wikiaAdUnit2[d[0]]:"Games");break;case "external":this.log("Site : External"),"ign"==b.videoNetwork?(h="5691",g="IGN_Video",i="973"):"askmen"==b.videoNetwork?(h="9884623",g="AskMenVideo",i="543"):"unknown"==b.videoNetwork&&(h="5691",g="IGN_Video",i="973"),d="External_Embeds"}f=b.embedLocation.url.split("?")[1];if(""!=f&&"undefined"!=typeof f){c=f.split("&");
for(f=0;f<c.length;f++){e=c[f].split("=");if("html5_companion_test"==e[0])window.html5_companion_test=!0,a.companionAds="300x250,6x6";"askmen_network"==e[0]&&"askmen"==b.videoHost&&("us"==e[1]?h="9884623":"intl"==e[1]&&(h="5691"));a.customData=this._addCustomParameter(e[0],e[1],a.customData)}}a.adUnits="/"+h+"/"+g+"/"+d;this.log("AdUnits : "+a.adUnits);this.log("Companion Ads : "+a.companionAds);a.customData=this._addCustomParameter("player","html5",a.customData);a.cmsid=i;b=this._getReferrerValue();
this.log("Requesting referrer value");a.customData=this._addCustomParameter("r",b,a.customData);return a},_getReferrerValue:function(){var a=document.referrer,b="";if(top!=self)a=IGN.referrer,this.log("iFrame Embed: Fetched referrer value from parent through postmessage API");""!=a?(this.log("Referrer found : "+a),a=a.split("/")[2],/(.+)\.alphabirdnetwork\.com/.test(a)?b="alphabirdnetwork.com":/(.+)\.gamespy\.com/.test(a)?b="gamespy.com":/(.+)\.facebook\.com/.test(a)?b="facebook.com":/plus\.url\.google\.com/.test(a)?
b="plus.google.com":/pinterest\.com/.test(a)?b="pinterest.com":/(.+)\.reddit\.com/.test(a)?b="reddit.com":/(.+)\.orkut\.com/.test(a)?b="orkut.com":/(.+)\.tumblr\.com/.test(a)?b="tumblr.com":/t\.co/.test(a)?b="twitter.com":/(.+)\.stumbleupon\.com/.test(a)?b="stumbleupon.com":/(.+)\.linkedin\.com/.test(a)?b="linkedin.com":/slashdot\.org/.test(a)?b="slashdot.org":/(.+)\.fark\.com/.test(a)?b="fark.com":/(.+)\.plurk\.com/.test(a)?b="plurk.com":/digg\.com/.test(a)&&(b="digg.com"),""!=b?(this.log("Social Referrer : "+
b),top!=self?window.postReferrerCookie(b):document.cookie="ignSocialReferrer="+b+"; path=/",this.log('Social Referrer cookie "ignSocialReferrer" set to '+b)):(this.log("Not a Social Referrer : "+b),/(.+)\.ign\.com/.test(a)?(b=this._getCookie("ignSocialReferrer"),b=""==b?"ign.com":b,this.log("Internal traffic : User reached by browsing on ign.com")):/(.+)\.askmen\.com/.test(a)?(b="askmen.com",this.log("Referrer : "+b),this.log("Internal traffic : "+b+" html5 iframe embed")):(this.log("External Traffic"),
b="external"))):(b=this._getCookie("ignSocialReferrer"),b=""==b?"none":b);return b},_getCookie:function(a){var a=a+"=",b="",c=top!=self?IGN.cookies:document.cookie;if(0<c.length&&(offset=c.indexOf(a),-1!=offset)){offset+=a.length;end=c.indexOf(";",offset);if(-1==end)end=c.length;b=unescape(c.substring(offset,end))}return b},_addCustomParameter:function(a,b,c){if(""==a||"undefined"==typeof a||""==b||"undefined"==typeof b)return c;encodedParameter=a+"%3D";encodedParameter+=b.replace(",","%2C","gi");
return c+(""!=c?"%26"+encodedParameter:encodedParameter)},log:function(a){if(window.activateHtml5PlayerLogs){"undefined"!=typeof window.console&&window.console&&window.console.log("[IGN IMA HTML5 Player] : "+a);var b=document.getElementById("qaconsole");if("undefined"!=typeof b&&null!=b)b.innerHTML=b.innerHTML+"<br/>"+a}}};imaHTML5.VideoContext.prototype={onClick:function(){window.isAndroid&&window.isChrome?this.playButton.css("opacity","0.0"):this.playButton.css("opacity","0.6");$("#videoPlayer_"+
vContexts[this.ctxId].videoId).trigger("playerInit",["videoId",vContexts[this.ctxId].videoId]);imaHTML5.log("Fire 'playerInit' custom event for GA to fire a Video View pixel");l=$("#"+videoContainer+vContexts[this.ctxId].videoId);l.css("z-index","1010").addClass("video-loading");$("#"+videoPlayerId+vContexts[this.ctxId].videoId).css("z-index","1020");if(top!==self){var a=this;this.playerController.contentPlayer.addEventListener("pause",function(){"function"===typeof window.iframeVideoPlayStatus&&
window.iframeVideoPlayStatus(!1,a.adsActive)});this.playerController.contentPlayer.addEventListener("play",function(){"function"===typeof window.iframeVideoPlayStatus&&window.iframeVideoPlayStatus(!0,a.adsActive)})}this.adsDone?(this.video.click(function(){this.play()}),this.adsActive?this.playing?this.adsController.pause():this.adsController.resume():this.playing?this.playerController.pause():this.playerController.play(),this.playing=!this.playing):(imaHTML5.log("Firing PreloadContent"),this.adsController.initialUserAction(),
this.playerController.preloadContent(window.imaHTML5.bind(this,this.loadAds)),this.adsDone=!0)},resumeAfterAd:function(){this.playerController.registerVideoEndedCallback(this.contentEndedCallback);this.playerController.setSrc(window.vContexts[this.ctxId].videoSrc);this.playerController.load();this.playerController.play();this.adsActive=!1},pauseForAd:function(){this.playerController.saveCurrentTime();this.playerController.unregisterVideoEndedCallback(this.contentEndedCallback);this.playing=this.adsActive=
!0;this.playerController.pause()},adClicked:function(){this.playing=!1},loadAds:function(){if(!this.metadataLoaded)imaHTML5.log("Content metadata loaded"),window.isAndroid||this.video.show(),this.adsController.requestAds(this.adTagUrl),this.metadataLoaded=!0},onContentEnded:function(){this.adsController.contentEnded()}};imaHTML5.PlayerController.prototype={setAdPlaying:function(a){this.adPlaying=a},preloadContent:function(a){this.isMobilePlatform()?(imaHTML5.log("Mobile Device : Preloading Content"),
this.contentPlayer.addEventListener("loadedmetadata",a,!1),this.contentPlayer.load()):(imaHTML5.log("Android / Non-Mobile : No Need To Preload Content"),this.contentPlayer.load(),a())},play:function(){l.removeClass("video-loading");this.contentPlayer.play()},pause:function(){this.contentPlayer.pause()},load:function(){this.contentPlayer.load()},isMobilePlatform:function(){var a=navigator.userAgent.match(/(iPod|iPhone|iPad)/);navigator.userAgent.toLowerCase().indexOf("android");return this.contentPlayer.paused&&
null!=a},registerVideoEndedCallback:function(a){this.contentPlayer.addEventListener("ended",a,!1)},unregisterVideoEndedCallback:function(a){this.contentPlayer.removeEventListener("ended",a,!1)},setSrc:function(a){this.contentPlayer.src=a},loadedMetadataHandler:function(){if(this.contentPlayer.seekable.length&&!this.adPlaying&&this.lastPauseTime&&this.contentPlayer.seekable.end(0)>this.lastPauseTime)this.contentPlayer.currentTime=this.lastPauseTime},saveCurrentTime:function(){this.lastPauseTime=this.contentPlayer.currentTime}};
imaHTML5.AdsController.prototype={initialUserAction:function(){this.adDisplayContainer.initialize()},requestAds:function(a){var b=new google.ima.AdsRequest;b.adTagUrl=a;b.linearAdSlotWidth=this.player.width;b.linearAdSlotHeight=this.player.height;b.nonLinearAdSlotWidth=this.player.width;b.nonLinearAdSlotHeight=this.player.height;imaHTML5.log("Ad Request Submitted");this.time.request=(new Date).getTime();this.adsLoader.requestAds(b)},onAdsManagerLoaded:function(a){imaHTML5.log("Ads manager loaded.");
this.adsManager=a.getAdsManager(this.player.contentPlayer);this.processAdsManager(this.adsManager)},processAdsManager:function(a){a.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this);a.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this);a.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this);var b=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,
google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE],c;for(c in b)a.addEventListener(b[c],this.onAdEvent,!1,this);a.init(this.player.width,this.player.height,google.ima.ViewMode.NORMAL);a.start()},pause:function(){this.adsManager&&this.adsManager.pause()},resume:function(){this.adsManager&&this.adsManager.resume()},
onContentPauseRequested:function(){this.videoContext.pauseForAd()},onContentResumeRequested:function(){this.contentCompleteCalled||this.videoContext.resumeAfterAd()},contentEnded:function(){this.contentCompleteCalled=!0;this.adsLoader.contentComplete();$(this.videoContext.video).trigger("contentComplete",["videoId",this.videoContext.videoId]);imaHTML5.log("Trigger 'contentComplete' custom event for GA to fire 'videoComplete' pixel")},trackPrerollLoadTime:function(a){var b=this.time.response-this.time.request+
"";$(this.videoContext.video).trigger({type:"prerollLoadTime",videoId:a,loadTime:b});imaHTML5.log("Trigger 'prerollLoadTime' custom event for GA to fire 'Preroll Load Time' pixel with value = "+b)},onAdEvent:function(a){switch(a.type){case google.ima.AdEvent.Type.CLICK:this.videoContext.adClicked();this.videoContext.video.attr("controls",!0);imaHTML5.log("Ad Clicked : Enable controls");break;case google.ima.AdEvent.Type.LOADED:0<this.videoContext.posterImg.length&&0<this.videoContext.playButton.length&&
(this.videoContext.posterImg.remove(),this.videoContext.playButton.remove());"undefined"!==typeof this.videoContext.adContainer&&this.videoContext.adContainer.addClass("adPlaying");imaHTML5.log("Ads Loaded : Remove play & poster img");break;case google.ima.AdEvent.Type.STARTED:l.removeClass("video-loading");this.time.response=(new Date).getTime();0<this.videoContext.video.length&&(window.isAndroid||this.videoContext.video.show(),this.adsManager.isCustomClickTrackingUsed()?(imaHTML5.log("Ad Started : click tracker used by DFP for videoId = "+
window.vContexts[this.ctxId].videoId),this._toggleClickTracker()):imaHTML5.log("Ad Started : click tracker NOT used by DFP for videoId = "+window.vContexts[this.ctxId].videoId),this.videoContext.video.attr("controls",!1),imaHTML5.log("Ad Started : Show video player & click tracker"),top!==self&&"function"===typeof window.iframeVideoPlayStatus&&window.iframeVideoPlayStatus(!0,this.videoContext.adsActive));a=a.getAd();if(null!=a){var b=a.getAdPodInfo();"undefined"!==typeof b&&!b.getIsBumper()&&0===
b.getPodIndex()&&this.trackPrerollLoadTime(window.vContexts[this.ctxId].videoId);var b=vContexts[this.videoContext.ctxId].adData,c=b.adUnits.split("/");if(4<=c.length&&"IGN_Video"==c[2])switch(c[3]){case "Mediavideoplayer":"300x250,6x6"==b.companionAds&&(imaHTML5.log("Rendering companion ads on Mediavideoplayer page"),this._renderAdInFriendlyIframe(a,"queen",300,250),this._renderAdInFriendlyIframe(a,"queen",6,6));break;case "Articles":"300x250"==b.companionAds&&window.ChessKit&&ChessKit.data&&ChessKit.data.watchread_type&&
"video_autoplay"===ChessKit.data.watchread_type&&(imaHTML5.log("Rendering companion ads on Watch Read video_autoplay page"),this._renderAdInFriendlyIframe(a,"queen",300,250))}}else imaHTML5.log("No Ad Object tied with master ad slot");break;case google.ima.AdEvent.Type.COMPLETE:0<this.videoContext.video.length&&(this.videoContext.video.attr("controls",!0),this.adsManager.isCustomClickTrackingUsed()&&this._toggleClickTracker());imaHTML5.log("Ad Complete : Enable controls & remove tracker after x seconds");
break;case google.ima.AdEvent.Type.RESUMED:0<this.videoContext.video.length&&this.videoContext.video.attr("controls",!1);"undefined"!==typeof this.videoContext.adContainer&&this.videoContext.adContainer.addClass("adPlaying");top!==self&&"function"===typeof window.iframeVideoPlayStatus&&window.iframeVideoPlayStatus(!0,this.videoContext.adsActive);imaHTML5.log("Ad Resumed : Disable controls");break;case google.ima.AdEvent.Type.PAUSED:0<this.videoContext.video.length&&this.videoContext.video.attr("controls",
!0);"undefined"!==typeof this.videoContext.adContainer&&this.videoContext.adContainer.removeClass("adPlaying");top!==self&&"function"===typeof window.iframeVideoPlayStatus&&window.iframeVideoPlayStatus(!1,this.videoContext.adsActive);imaHTML5.log("Ad Paused : Enable controls");break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:imaHTML5.log("All Ads Completed : Start Content & play till end");$(this.videoContext.video).trigger("contentStart",["videoId",this.videoContext.videoId]);"undefined"!==typeof this.videoContext.adContainer&&
this.videoContext.adContainer.removeClass("adPlaying");top!==self&&"function"===typeof window.iframeVideoPlayStatus&&window.iframeVideoPlayStatus(!1,this.videoContext.adsActive);break;case google.ima.AdEvent.Type.LOG:imaHTML5.log("Non Fatal Ad Error : User need not take any action since the SDK does");break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:imaHTML5.log("Content pause requested : Ad is about to take over player");break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:imaHTML5.log("Content resume requested : Ad completed");
break;case google.ima.AdEvent.Type.FIRST_QUARTILE:imaHTML5.log("25% Ad Complete : 1st quartile pixel fired");break;case google.ima.AdEvent.Type.MIDPOINT:imaHTML5.log("50% Ad Complete : 2nd quartile pixel fired");break;case google.ima.AdEvent.Type.THIRD_QUARTILE:imaHTML5.log("75% Ad Complete : 3rd quartile pixel fired");break;case google.ima.AdEvent.Type.SKIPPED:imaHTML5.log("Ad Skipped : User scrubbed / unexpected action to skip ad");break;case google.ima.AdEvent.Type.USER_CLOSE:imaHTML5.log("Ad Closed : User closed ad without completing")}},
_toggleClickTracker:function(){if(window.vContexts[this.ctxId].renderClickTracker&&(imaHTML5.log("Toggling clicktracker"),0<this.videoContext.clickTracker.length))if(window.top!=window.self||"100%"==this.player.contentPlayer.getAttribute("width"))if("visible"==this.videoContext.clickTracker.css("visibility")&&this.videoContext.trackerActive){this.videoContext.clickTracker.css({visibility:"hidden","z-index":"0"});if("100%"==this.player.contentPlayer.getAttribute("width"))this.videoContext.video.css("height",
"100%");else{playerW=this.videoContext.video.css("width");playerW=playerW.substr(0,playerW.length-2);playerH=this.videoContext.video.css("height");playerH=playerH.substr(0,playerH.length-2);properH=9*playerW/16;if("number"==typeof window.innerHeight)iframeH=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))iframeH=document.documentElement.clientHeight;iframeH<properH&&(properH=iframeH);playerH>properH?this.videoContext.video.css("height",
"-="+(playerH-properH)+"px"):this.videoContext.video.css("height","+="+(properH-playerH)+"px")}this.videoContext.trackerActive=!1}else this.videoContext.clickTracker.css({width:"100%",visibility:"visible",position:"absolute",bottom:"0px",height:"25px",display:"block","z-index":"1030"}),this.videoContext.video.css("height","-=25px"),this.videoContext.trackerActive=!0;else"visible"==this.videoContext.clickTracker.css("visibility")&&this.videoContext.trackerActive?(setTimeout(this.videoContext.clickTracker.css("visibility",
"hidden"),3E3),this.videoContext.trackerActive=!1):(this.videoContext.clickTracker.css("visibility","visible"),this.videoContext.trackerActive=!0)},_renderAdInFriendlyIframe:function(a,b,c,h){if("undefined"==typeof a||null==a)return!1;a=a.getCompanionAds(c,h,{resourceType:google.ima.CompanionAdSelectionSettings.ResourceType.ALL,creativeType:google.ima.CompanionAdSelectionSettings.CreativeType.ALL});if(a.length){imaHTML5.log("Companion ad of size "+c+"x"+h+" returned");adCreative=a[0].getContent();
if(!adCreative)return imaHTML5.log("No Creative present"),!1;imaHTML5.log("Companion Ad "+c+"x"+h+" Content = "+adCreative)}else return imaHTML5.log("No Companion Ads of size "+c+"x"+h+" returned from Ad Object"),window.ChessKit&&ChessKit.data&&ChessKit.data.watchread_type&&"video_autoplay"===ChessKit.data.watchread_type&&(imaHTML5.log("On watchread video_autoplay page, no companions returned with preroll so refreshing to fill with ROS"),ChessKit.request.slots.allUnits.queen&&ChessKit.request.refresh([ChessKit.request.slots.allUnits.queen.slot])),
!1;if(window.top!=window.self)window.postCompanionAd(adCreative,c,h,b);else{a=document.getElementById(b);if("undefined"==typeof a||null==a)return imaHTML5.log('Failed to render companion ad. No dom element with id "'+b+'" exists.'),!1;imaHTML5.log("Found companion ad container ");a.style.height=h+"px";a.style.height=c+"px";a.innerHTML="";var b=b+"_fiframe",g=document.createElement("iframe");g.id=b;g.name=b;g.src="/sugarfif.html?4";g.style.border="0px";g.width=c+"px";g.height=h+"px";g.scrolling="no";
g.seamless="seamless";g.fifwidth=c+"px";g.fifheight=h+"px";g.adcreative=adCreative;if(-1!=navigator.userAgent.indexOf("MSIE"))g.frameBorder="0",g.allowTransparency="true";a.appendChild(g);imaHTML5.log("Appended friendly iframe with companion ad rendered inside")}},onAdError:function(a){imaHTML5.log("Ad error: "+a.getError().toString());this.adsManager&&this.adsManager.destroy();this.videoContext.resumeAfterAd()}};window.imaHTML5.async=window.imaHTML5.async||[];window.imaHTML5.async.push=function(a){"[object Array]"!==
Object.prototype.toString.call(a)&&(a=[a]);for(var b=0,c=a.length;b<c;b++)if("function"===typeof a[b])a[b]()};for(var k=0,n=m.length;k<n;k++)0==k&&window.imaHTML5.log("Processing ima HTML5 async request queue"),window.imaHTML5.async.push(m[k])})})();
(function(d){var i={},j=function(a){if(!i[a]){var b=d("#videoPlayer_"+a),c=b.data("objectIds"),b=videoContext=0<b.parents("ul.content-slider").length||0<b.parents("div.wrapper-player").length||0<b.parents("div.featured-video").length?"Hero Unit":"Embed",c=window.IGN_UA.createVideoObject(a,"State 1",c,"v3 - HTML5",b,"User Initiated",!1);i[a]=c}return i[a]};window.gaVideoHTML5=window.gaVideoHTML5||{};var k=window.gaVideoHTML5.async||[],h=top!=self?document.referrer:document.location.href;window.activateHtml5AnalyticsLogs=
!1;if(-1!==h.indexOf("debugga=true"))window.activateHtml5AnalyticsLogs=!0;window.igndrones=window.igndrones||{};window.gaVideoHTML5={bindedVideos:[],trackVideoView:function(a){var b=d("#"+a.target.id).attr("data-video-id");window.gaVideoHTML5.log("In trackVideoView for videoId = "+b);var c=d("#"+a.target.id).attr("data-video-caption"),e=d("#"+a.target.id).attr("data-video-duration"),g,f=d("#"+a.target.id).attr("data-video-series");top!==self&&window.igndrones.iframeReferrer.ign?(window.gaVideoHTML5.log("On IGN in iframe, sending function call over PostMessage to parent"),
g=IGN&&IGN.pagetype?IGN.pagetype:"unmatched",a={methodName:"fireVideoView",videoId:b,videoTitle:c,videoDuration:e,videoContext:g,videoPlayer:"HTML5"},""!==f&&"none"!==f&&(a.videoSeriesTitle=f),window.igndrones.async.push(a)):(window.gaVideoHTML5.log("IGN non-iFrame embed / Non-IGN iFrame embed"),g=window.ChessKit&&ChessKit.data&&ChessKit.data.pagetype?ChessKit.data.pagetype:"unmatched",""!==f&&"none"!==f?(window.igndrones.async.push(function(){window.igndrones.fireVideoView(b,c,e,g,"HTML5",f)}),window.gaVideoHTML5.log("fireVideoView invoked with : videoId="+
b+" videoTitle="+c+" videoDuration="+e+" videoContext="+g+" videoPlayer=HTML5 videoSeriesTitle="+f)):(window.igndrones.async.push(function(){window.igndrones.fireVideoView(b,c,e,g,"HTML5")}),window.gaVideoHTML5.log("fireVideoView invoked with : videoId="+b+" videoTitle="+c+" videoDuration="+e+" videoContext="+g+" videoPlayer=HTML5")),-1<d("#"+a.target.id).attr("id").indexOf("_alt")&&(b+="_alt"),window.IGN_UA.trackEvent("video-videoPlay",j(b)))},trackPrerollLoadTime:function(a,b){window.gaVideoHTML5.log("In trackPrerollLoadTime for videoId = "+
a);top!==self&&window.igndrones.iframeReferrer.ign?window.igndrones.async.push({methodName:"firePrerollLoadTime",videoId:a,loadTime:b}):(window.igndrones.async.push(function(){window.igndrones.firePrerollLoadTime(a,b)}),window.gaVideoHTML5.log("firePrerollLoadTime invoked with : videoId="+a+" Ad loadTime = "+b));window.IGN_UA.trackEventWithValue("performance-preRollLoadTime",b)},trackVideoStart:function(a){var b=d("#"+a.target.id).attr("data-video-id");window.gaVideoHTML5.log("In trackVideoStart for videoId = "+
b);var c=d("#"+a.target.id).attr("data-video-caption"),e=d("#"+a.target.id).attr("data-video-duration");top!==self&&window.igndrones.iframeReferrer.ign?window.igndrones.async.push({methodName:"fireVideoStart",videoId:b,videoTitle:c,videoDuration:e}):(window.igndrones.async.push(function(){window.igndrones.fireVideoStart(b,c,e)}),window.gaVideoHTML5.log("fireVideoStart invoked with : videoId="+b+" videoTitle="+c+" videoDuration="+e))},trackVideoLiveStart:function(a){var b=d("#"+a.target.id).attr("data-video-id");
window.gaVideoHTML5.log("In trackVideoLiveStart for videoId = "+b);var c=d("#"+a.target.id).attr("data-video-caption");top!==self&&window.igndrones.iframeReferrer.ign?window.igndrones.async.push({methodName:"fireVideoLiveStart",videoId:b,videoTitle:c}):(window.igndrones.async.push(function(){window.igndrones.fireVideoLiveStart(b,c)}),window.gaVideoHTML5.log("fireVideoLiveStart invoked with : videoId="+b+" videoTitle="+c))},trackVideoComplete:function(a){var b=d("#"+a.target.id).attr("data-video-id");
window.gaVideoHTML5.log("In trackVideoComplete for videoId = "+b);var c=d("#"+a.target.id).attr("data-video-caption"),e=d("#"+a.target.id).attr("data-video-duration");top!==self&&window.igndrones.iframeReferrer.ign?window.igndrones.async.push({methodName:"fireVideoComplete",videoId:b,videoTitle:c,videoDuration:e}):(window.igndrones.async.push(function(){window.igndrones.fireVideoComplete(b,c,e)}),window.gaVideoHTML5.log("fireVideoComplete invoked with : videoId="+b+" videoTitle="+c+" videoDuration="+
e));window.IGN_UA.trackEvent("video-videoComplete",j(b))},trackVideoProgress:function(a,b){window.igndrones.async.push(function(){window.igndrones.fireEvent("Video","Playback","Progress",b,!0)});window.IGN_UA.trackEventWithValue("video-videoProgress",b,j(a))},bindVideoAnalytics:function(a,b){if("undefined"!==typeof a){-1!==window.gaVideoHTML5.bindedVideos.indexOf(a)&&(a+="_alt");window.gaVideoHTML5.bindedVideos.push(a);gaVideoHTML5.log("Binding HTML5 analytics : videoId = "+a);var c="#videoPlayer_"+
a;if(!0===b)d("body").on("playerInit",c,function(a){Math.floor(a.target.currentTime)||window.gaVideoHTML5.trackVideoView(a)}),d("body").on("prerollLoadTime",c,function(a){"undefined"!==typeof a.videoId&&"undefined"!==typeof a.loadTime&&window.gaVideoHTML5.trackPrerollLoadTime(a.videoId,a.loadTime)}),d("body").on("contentStart",c,function(){window.gaVideoHTML5.trackVideoElementEvents(c,!0)}),d("body").on("contentComplete",c,function(a){window.gaVideoHTML5.trackVideoComplete(a)});else d(document).on("ready",
function(){window.gaVideoHTML5.trackVideoElementEvents(c,!1)})}},trackVideoElementEvents:function(a,b){var c=d(a);c.on("play",function(a){!1===b&&window.gaVideoHTML5.trackVideoView(a);Math.floor(a.target.currentTime)||(gaVideoHTML5.createViewTimeTracker(c[0]),void 0!==c.attr("data-video-live")?window.gaVideoHTML5.trackVideoLiveStart(a):window.gaVideoHTML5.trackVideoStart(a))});if(!1===b)c.on("ended",function(a){window.gaVideoHTML5.trackVideoComplete(a)});c.on("timeupdate",window.gaVideoHTML5.getQuartileTracker(c.get(0)))},
getQuartileTracker:function(a,b){var b=b||[0,25,50,75,100],c=a.getAttribute("data-video-id"),e=0;return function(){var d=100*Math.ceil(a.currentTime)/a.duration;if(e>d)return e=d,!1;b.filter(function(a){return e<=a&&d>a}).map(function(a){window.gaVideoHTML5.trackVideoProgress(c,a)});e=d}},createViewTimeTracker:function(a){var b,c;function d(){gaVideoHTML5.log("startSessionTimer");a.removeEventListener("play",d);a.addEventListener("pause",g);f=new Date}function g(){gaVideoHTML5.log("pauseSessionTimer");
a.removeEventListener("pause",g);a.addEventListener("play",d);h+=new Date-f;f=null}var f=null,h=0;c="video-videoPlay10s";b="video-videoPlay3s";var i=setInterval(function(){gaVideoHTML5.log("checkViewTimeInterval");if(null!==f){var k=h+(new Date-f);3E3<k&&b&&(window.IGN_UA.trackEventWithValue(b,1,j(a.dataset.videoId)),gaVideoHTML5.log("Firing UA Video View 3s"),b=null);1E4<k&&c&&(window.IGN_UA.trackEventWithValue(c,1,j(a.dataset.videoId)),gaVideoHTML5.log("Firing UA Video View 10s"),c=null,clearInterval(i),
a.removeEventListener("play",d),a.removeEventListener("pause",g))}},200);d()},log:function(a){window.activateHtml5AnalyticsLogs&&"undefined"!=typeof window.console&&window.console&&window.console.log("[IGN HTML5 Player Analytics] : "+a)}};window.gaVideoHTML5.async=window.gaVideoHTML5.async||[];window.gaVideoHTML5.async.push=function(a){window.gaVideoHTML5.log("gaVideoHTML5.async.push "+a);"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);for(var b=0,c=a.length;b<c;b++)if("function"===
typeof a[b])a[b]()};for(var h=0,l=k.length;h<l;h++)0===h&&window.gaVideoHTML5.log("Processing GA video HTML5 analytics async request queue"),window.gaVideoHTML5.async.push(k[h])})(jQuery);
var IGN=IGN||{};
(function(d,g,j){var k=function(a){this.element=a;this.options={}};k.prototype={init:function(){var a;target=this.options.target||d(this.element).closest(".ign-videoplayer");target.attr("id");a=target.find(".video-js");var c=navigator.userAgent.toLowerCase(),b=-1<c.indexOf("safari")&&0>c.indexOf("chrome"),f=navigator.userAgent.match(/Android/i),e=ChessKit.util.checkForFlash(),e=c.match(/firefox/i)?e.enabled&&!e.blocked:e.enabled;!e&&!b&&!f&&target.data("videoLive")&&a.addClass("flash-error-msg");target.on("recircState",
r);"undefined"!==typeof target.data("network")&&a.addClass(target.data("network"));target.find(".video-embed-poster").remove();target.find(".video-embed-poster-play-button").remove();a=createIGNPlayer(a.attr("id"),!0);("undefined"===typeof a.theme||"channel"!==a.theme)&&s(a);t(target)}};d.fn.watchable=function(a){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){d.data(this,"plugin_watchable")instanceof k||d.data(this,"plugin_watchable",new k(this));instance=d.data(this,"plugin_watchable");
if("undefined"===typeof a||"object"===typeof a)"function"===typeof instance.init&&instance.init(a);else{if("string"===typeof a&&"function"===typeof instance[a])return instance[a].apply(instance,c);d.error("Method "+a+" does not exist on jQuery.watchable")}return this})};d(j).ready(function(){"function"===typeof d("document").unveil&&d(".video-embed-poster-image").unveil(200);o();p();j.addEventListener("player-added",function(){o();p()},!1)});var t=function(a){var c=a.find(".player-feedback"),b=c.find("form"),
f=c.find("div"),e=c.find("span"),i={"Video Title":a.data("videoTitle"),"Video Id":a.data("videoId"),"Video Url":a.data("videoUrl"),"Video Assets":JSON.stringify(a.data("video")),"Page Type":IGN.pagetype,"User Agent":navigator.userAgent};a.on("click",".social-feedback",function(){""===d.trim(a.find(".social-feedback-container").html())&&(a.find(".social-feedback-container").append(c),i["Ad Blocker Detected"]=0===d(".sugarad").length);a.find(".social-container").addClass("feedback");var e=d(".user-tools").attr("js-data");
if(e)try{var f=JSON.parse(e).nickname;""!==f&&b.find("input[name=nickname]").val(f)}catch(g){}}).on("click","input[name=submit]",function(c){var g="Video Player Data:\n===========\n";c.preventDefault();i["Selected Rendition"]=a.find(".rendition.selected").text();for(var j in i)i.hasOwnProperty(j)&&(g+=j+": "+encodeURIComponent(i[j])+"\n");b.find("input[name=extendedMessage]").remove();b.append('<input type="hidden" name="extendedMessage" value="'+g+'">');d.ajax({url:"/support/contact",type:"POST",
data:b.serialize(),beforeSend:function(){b.find("input, textarea").attr("disabled","disabled")},success:function(a){if(a.valid)f.text("Feedback sent."),e.text("Thank you!");else{f.text("Something went wrong.");if("Value is required and can't be empty"===a.message)a.message="Feedback is required.";e.text(a.message);b.find("input, textarea").removeAttr("disabled")}}})})},l=function(a){var a=d(a),c=a.find(".video-js");c.find(".vjs-tech").length||(c.data("player",a.data("player")),g.bc(c[0]));a.removeClass("watchable").off("click");
a.data("videoLive")?u(a):a.watchable({target:a})},u=function(a){var c=a.data("video"),b={};d.ajax({url:c.m3uUrl,success:function(f){f=f.split("#EXT-X-STREAM-INF:");f.shift();for(var e=1;e<f.length;e++){var d,h;f[e]=f[e].split("\n")[0];if(d=f[e].match(/RESOLUTION=\d+x(\d+)/i))h=d[1],d=parseInt(f[e].match(/BANDWIDTH=(\d+)/i)[1],10),b[h]=!b[h]||d<b[h]?d:b[h]}for(h in b)b.hasOwnProperty(h)&&c.assets.push({height:h,bitrate:b[h]});b[480]?a.data("bitrate",b[480]):a.data("bitrate",c.assets[0].bitrate);a.data("video",
c);a.watchable({target:a})}})},o=function(){var a=d(".watchable.autoplay");a.length&&a.each(function(){l(this)})},p=function(){var a=d(".watchable.iphone");a.length&&a.each(function(){l(this)})},r=function(a){if("undefined"!==typeof a.target){var a=d(a.target),c=a.find(".video-js")[0];if(a.length){var b={$video:a,bcc:videojs(c).bcc,countDown:a.data("countdown"),seconds:a.data("countdown"),href:null,countDownInterval:null,scrollLimit:500,textElem:null},c="";$firstRecircVideo=d(".end-slate").find('[data-id="0"]');
if($firstRecircVideo.length)$firstRecircVideo.find(".related-item-overlay").css("display","none"),$firstRecircVideo.find("img").css("opacity","0.7"),c='<div class="recirc-timer"><span class="up-next">UP NEXT</span><span class="autoplay-switch">AUTOPLAY <a class="timer-text" href="#" data-ison="true">ON</a></span><span class="timer-countdown">'+b.countDown+"</span></div>",$firstRecircVideo.append(c),c=$firstRecircVideo.find(".autoplay-switch"),"undefined"!==typeof c&&c.unbind("click"),$firstRecircVideo.bind("click",
function(a){a.preventDefault();a.stopImmediatePropagation();m(b)}),b.player=a,b.currentVideo={id:a.data("videoId"),title:a.data("videoTitle")},b.countDownElem=$firstRecircVideo.find(".timer-countdown"),b.autoplayTextElem=$firstRecircVideo.find(".autoplay-switch a"),b.firstRecircVideo=$firstRecircVideo,b.countDownInterval=setInterval(function(){n(b)},1E3),v(b)}}},m=function(a,c){if(!("undefined"===typeof a||"undefined"===typeof a.autoplayTextElem))if("undefined"!==typeof c)c?(a.autoplayTextElem.text("ON"),
a.countDownInterval=setInterval(function(){n(a)},1E3),a.autoplayTextElem.data("ison",!0)):(a.autoplayTextElem.text("OFF"),clearInterval(a.countDownInterval),a.autoplayTextElem.data("ison",!1));else{var b=a.autoplayTextElem.data("ison");b?(a.autoplayTextElem.text("OFF"),clearInterval(a.countDownInterval)):(a.autoplayTextElem.text("ON"),a.countDownInterval=setInterval(function(){n(a)},1E3));a.autoplayTextElem.data("ison",!b)}},n=function(a){if(!("undefined"===typeof a||"undefined"===typeof a.countDownElem))if(a.seconds--,
a.countDownElem.text(a.seconds),0>=a.seconds)a.seconds=0,clearInterval(a.countDownInterval),g._gaq.push(["_trackEvent","Video Countdown","Video:"+a.currentVideo.id,a.currentVideo.title,a.countDown,!0]),setTimeout(function(){a.bcc.EndSlate.playFirstVideo()},1E3)},q=function(a,c){var b=d(g),f=b.scrollTop(),b=f+b.height(),e=a.offset().top,i=e+a.height();return c?e<=b&&i>=f:i<=b&&e>=f},v=function(a){var c=q(a.player,!1);c||m(a,!1);g.addEventListener("scroll",function(){q(a.player,!1)||m(a,!1)},!1);a.autoplayTextElem.data("ison",
!0);return c},w=function(a,c,b,f,e){"undefined"===typeof f&&(f=function(a){return a});"undefined"===typeof e&&(e=function(a,c,b){console.error(a,c,b)});d.ajax({url:a,dataType:b,data:c,success:f,error:e})},s=function(a){var c=d(a.videoPlayer.el_).find(".ign-controls-overlay");c.find("#video-title a");var b="http://"+IGN.getWidgetDomain()+"/video/embed/overlay.jsonp";w(b,{videoId:a.video.id,videoTitle:a.video.title,videoUrl:a.video.url,videoSeries:a.video.videoSeries,talentAvatarsParams:{videoId:a.video.id,
layout:"large",contentType:"video",fullDomain:g.document.domain,enableHoverCard:!0}},"jsonp",function(b){c.prepend(b);c.find(".share-button").on("click",function(b){b.stopImmediatePropagation();b.stopPropagation();b.preventDefault();a.trigger("BCC.VIDEO_SHARE_CLICK")})})};d(j).on("click",".watchable",function(a){l(this);a.preventDefault()})})(jQuery,window,document);
